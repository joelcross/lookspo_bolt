revoke delete on table "public"."activities" from "anon";

revoke insert on table "public"."activities" from "anon";

revoke references on table "public"."activities" from "anon";

revoke select on table "public"."activities" from "anon";

revoke trigger on table "public"."activities" from "anon";

revoke truncate on table "public"."activities" from "anon";

revoke update on table "public"."activities" from "anon";

revoke delete on table "public"."activities" from "authenticated";

revoke insert on table "public"."activities" from "authenticated";

revoke references on table "public"."activities" from "authenticated";

revoke select on table "public"."activities" from "authenticated";

revoke trigger on table "public"."activities" from "authenticated";

revoke truncate on table "public"."activities" from "authenticated";

revoke update on table "public"."activities" from "authenticated";

revoke delete on table "public"."activities" from "service_role";

revoke insert on table "public"."activities" from "service_role";

revoke references on table "public"."activities" from "service_role";

revoke select on table "public"."activities" from "service_role";

revoke trigger on table "public"."activities" from "service_role";

revoke truncate on table "public"."activities" from "service_role";

revoke update on table "public"."activities" from "service_role";

revoke delete on table "public"."collections" from "anon";

revoke insert on table "public"."collections" from "anon";

revoke references on table "public"."collections" from "anon";

revoke select on table "public"."collections" from "anon";

revoke trigger on table "public"."collections" from "anon";

revoke truncate on table "public"."collections" from "anon";

revoke update on table "public"."collections" from "anon";

revoke delete on table "public"."collections" from "authenticated";

revoke insert on table "public"."collections" from "authenticated";

revoke references on table "public"."collections" from "authenticated";

revoke select on table "public"."collections" from "authenticated";

revoke trigger on table "public"."collections" from "authenticated";

revoke truncate on table "public"."collections" from "authenticated";

revoke update on table "public"."collections" from "authenticated";

revoke delete on table "public"."collections" from "service_role";

revoke insert on table "public"."collections" from "service_role";

revoke references on table "public"."collections" from "service_role";

revoke select on table "public"."collections" from "service_role";

revoke trigger on table "public"."collections" from "service_role";

revoke truncate on table "public"."collections" from "service_role";

revoke update on table "public"."collections" from "service_role";

revoke delete on table "public"."follows" from "anon";

revoke insert on table "public"."follows" from "anon";

revoke references on table "public"."follows" from "anon";

revoke select on table "public"."follows" from "anon";

revoke trigger on table "public"."follows" from "anon";

revoke truncate on table "public"."follows" from "anon";

revoke update on table "public"."follows" from "anon";

revoke delete on table "public"."follows" from "authenticated";

revoke insert on table "public"."follows" from "authenticated";

revoke references on table "public"."follows" from "authenticated";

revoke select on table "public"."follows" from "authenticated";

revoke trigger on table "public"."follows" from "authenticated";

revoke truncate on table "public"."follows" from "authenticated";

revoke update on table "public"."follows" from "authenticated";

revoke delete on table "public"."follows" from "service_role";

revoke insert on table "public"."follows" from "service_role";

revoke references on table "public"."follows" from "service_role";

revoke select on table "public"."follows" from "service_role";

revoke trigger on table "public"."follows" from "service_role";

revoke truncate on table "public"."follows" from "service_role";

revoke update on table "public"."follows" from "service_role";

revoke delete on table "public"."likes" from "anon";

revoke insert on table "public"."likes" from "anon";

revoke references on table "public"."likes" from "anon";

revoke select on table "public"."likes" from "anon";

revoke trigger on table "public"."likes" from "anon";

revoke truncate on table "public"."likes" from "anon";

revoke update on table "public"."likes" from "anon";

revoke delete on table "public"."likes" from "authenticated";

revoke insert on table "public"."likes" from "authenticated";

revoke references on table "public"."likes" from "authenticated";

revoke select on table "public"."likes" from "authenticated";

revoke trigger on table "public"."likes" from "authenticated";

revoke truncate on table "public"."likes" from "authenticated";

revoke update on table "public"."likes" from "authenticated";

revoke delete on table "public"."likes" from "service_role";

revoke insert on table "public"."likes" from "service_role";

revoke references on table "public"."likes" from "service_role";

revoke select on table "public"."likes" from "service_role";

revoke trigger on table "public"."likes" from "service_role";

revoke truncate on table "public"."likes" from "service_role";

revoke update on table "public"."likes" from "service_role";

revoke delete on table "public"."posts" from "anon";

revoke insert on table "public"."posts" from "anon";

revoke references on table "public"."posts" from "anon";

revoke select on table "public"."posts" from "anon";

revoke trigger on table "public"."posts" from "anon";

revoke truncate on table "public"."posts" from "anon";

revoke update on table "public"."posts" from "anon";

revoke delete on table "public"."posts" from "authenticated";

revoke insert on table "public"."posts" from "authenticated";

revoke references on table "public"."posts" from "authenticated";

revoke select on table "public"."posts" from "authenticated";

revoke trigger on table "public"."posts" from "authenticated";

revoke truncate on table "public"."posts" from "authenticated";

revoke update on table "public"."posts" from "authenticated";

revoke delete on table "public"."posts" from "service_role";

revoke insert on table "public"."posts" from "service_role";

revoke references on table "public"."posts" from "service_role";

revoke select on table "public"."posts" from "service_role";

revoke trigger on table "public"."posts" from "service_role";

revoke truncate on table "public"."posts" from "service_role";

revoke update on table "public"."posts" from "service_role";

revoke delete on table "public"."profiles" from "anon";

revoke insert on table "public"."profiles" from "anon";

revoke references on table "public"."profiles" from "anon";

revoke select on table "public"."profiles" from "anon";

revoke trigger on table "public"."profiles" from "anon";

revoke truncate on table "public"."profiles" from "anon";

revoke update on table "public"."profiles" from "anon";

revoke delete on table "public"."profiles" from "authenticated";

revoke insert on table "public"."profiles" from "authenticated";

revoke references on table "public"."profiles" from "authenticated";

revoke select on table "public"."profiles" from "authenticated";

revoke trigger on table "public"."profiles" from "authenticated";

revoke truncate on table "public"."profiles" from "authenticated";

revoke update on table "public"."profiles" from "authenticated";

revoke delete on table "public"."profiles" from "service_role";

revoke insert on table "public"."profiles" from "service_role";

revoke references on table "public"."profiles" from "service_role";

revoke select on table "public"."profiles" from "service_role";

revoke trigger on table "public"."profiles" from "service_role";

revoke truncate on table "public"."profiles" from "service_role";

revoke update on table "public"."profiles" from "service_role";

revoke delete on table "public"."saves" from "anon";

revoke insert on table "public"."saves" from "anon";

revoke references on table "public"."saves" from "anon";

revoke select on table "public"."saves" from "anon";

revoke trigger on table "public"."saves" from "anon";

revoke truncate on table "public"."saves" from "anon";

revoke update on table "public"."saves" from "anon";

revoke delete on table "public"."saves" from "authenticated";

revoke insert on table "public"."saves" from "authenticated";

revoke references on table "public"."saves" from "authenticated";

revoke select on table "public"."saves" from "authenticated";

revoke trigger on table "public"."saves" from "authenticated";

revoke truncate on table "public"."saves" from "authenticated";

revoke update on table "public"."saves" from "authenticated";

revoke delete on table "public"."saves" from "service_role";

revoke insert on table "public"."saves" from "service_role";

revoke references on table "public"."saves" from "service_role";

revoke select on table "public"."saves" from "service_role";

revoke trigger on table "public"."saves" from "service_role";

revoke truncate on table "public"."saves" from "service_role";

revoke update on table "public"."saves" from "service_role";

alter table "public"."activities" drop constraint "activities_actor_id_fkey";

alter table "public"."activities" drop constraint "activities_post_id_fkey";

alter table "public"."activities" drop constraint "activities_target_user_id_fkey";

alter table "public"."collections" drop constraint "collections_user_id_fkey";

alter table "public"."follows" drop constraint "follows_follower_id_fkey";

alter table "public"."follows" drop constraint "follows_following_id_fkey";

alter table "public"."likes" drop constraint "likes_post_id_fkey";

alter table "public"."likes" drop constraint "likes_user_id_fkey";

alter table "public"."posts" drop constraint "posts_user_id_fkey";

alter table "public"."saves" drop constraint "saves_collection_id_fkey";

alter table "public"."saves" drop constraint "saves_post_id_fkey";

alter table "public"."saves" drop constraint "saves_user_id_fkey";

alter table "public"."activities" add constraint "activities_actor_id_fkey" FOREIGN KEY (actor_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."activities" validate constraint "activities_actor_id_fkey";

alter table "public"."activities" add constraint "activities_post_id_fkey" FOREIGN KEY (post_id) REFERENCES public.posts(id) ON DELETE SET NULL not valid;

alter table "public"."activities" validate constraint "activities_post_id_fkey";

alter table "public"."activities" add constraint "activities_target_user_id_fkey" FOREIGN KEY (target_user_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."activities" validate constraint "activities_target_user_id_fkey";

alter table "public"."collections" add constraint "collections_user_id_fkey" FOREIGN KEY (user_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."collections" validate constraint "collections_user_id_fkey";

alter table "public"."follows" add constraint "follows_follower_id_fkey" FOREIGN KEY (follower_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."follows" validate constraint "follows_follower_id_fkey";

alter table "public"."follows" add constraint "follows_following_id_fkey" FOREIGN KEY (following_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."follows" validate constraint "follows_following_id_fkey";

alter table "public"."likes" add constraint "likes_post_id_fkey" FOREIGN KEY (post_id) REFERENCES public.posts(id) ON DELETE CASCADE not valid;

alter table "public"."likes" validate constraint "likes_post_id_fkey";

alter table "public"."likes" add constraint "likes_user_id_fkey" FOREIGN KEY (user_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."likes" validate constraint "likes_user_id_fkey";

alter table "public"."posts" add constraint "posts_user_id_fkey" FOREIGN KEY (user_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."posts" validate constraint "posts_user_id_fkey";

alter table "public"."saves" add constraint "saves_collection_id_fkey" FOREIGN KEY (collection_id) REFERENCES public.collections(id) ON DELETE CASCADE not valid;

alter table "public"."saves" validate constraint "saves_collection_id_fkey";

alter table "public"."saves" add constraint "saves_post_id_fkey" FOREIGN KEY (post_id) REFERENCES public.posts(id) ON DELETE CASCADE not valid;

alter table "public"."saves" validate constraint "saves_post_id_fkey";

alter table "public"."saves" add constraint "saves_user_id_fkey" FOREIGN KEY (user_id) REFERENCES public.profiles(id) ON DELETE CASCADE not valid;

alter table "public"."saves" validate constraint "saves_user_id_fkey";

create policy "Allow anon to insert their own profile"
on "public"."profiles"
as permissive
for insert
to anon
with check ((auth.uid() = id));




